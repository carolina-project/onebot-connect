# 协议转换

## 文件消息转换

在进行文件消息转换时，规则如下:

**接收消息(接收OneBot 11消息，转换成OneBot 12消息)**

会将OneBot11 的消息内容进行记录，之后随机生成UUID作为OneBot12消息段的`file_id`字段

**发送消息(发送OneBot 12消息，转换成OneBot 11消息)**

首先判断`file_id`是否存在，存在则进行如下的转换:

如果记录的消息内容是接收格式的，那么将OneBot 11消息的`file`字段设定成文件URL之后转换；如果是发送格式(已经上传到实现端)，那么就将`file`字段设定成上传后保存的URL
